(function(){var t=false;this.Class=function(){};Class.extend=function(e){var i=this.prototype,s,n,r,o;t=true;s=new this;t=false;for(n in e){s[n]=typeof e[n]=="function"&&typeof i[n]=="function"?function(t,e){return function(){r=this._super;this._super=i[t];o=e.apply(this,arguments);this._super=r;return o}}(n,e[n]):e[n]}function h(e){if(this instanceof arguments.callee){if(!t&&this.init)this.init.apply(this,e&&e.callee?e:arguments)}else return new arguments.callee(arguments)}h.prototype=s;h.constructor=h;h.extend=arguments.callee;return h}})();(function(t,e,i){"use strict";var s=Object.prototype.toString,n="function",r="string",o="array",h="object",a=false,u=[],f=false,c=navigator.userAgent.match(/mobile/i),l=c&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch),m=t.G_vmlCanvasManager,v=/webkit|msie/i.exec(t.navigator.userAgent),g=/^([#]?)([a-z][\w\-]*)$/,p=["","LEFT","CENTER","RIGHT"],d=[],y=null,w=null,x=false,_="Cevent"+(new Date).getTime(),C=0,T={},k=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,i){t.setTimeout(e,1e3/60)}}(),b=function(t,e){return s.call(t).slice(8,-1).toLowerCase()==e},z=function(t,e){var i,s=0;if(b(t,o)){for(;(i=t[s++])&&e(i,s)!==false;){}}},P=function(t,e){var i=S(t,e);if(i>=0){t.splice(i,1);return e}return null},E=function(){if(document.addEventListener){return function(t,e,i){t.addEventListener(e,i,false)}}else{return function(t,e,i){t.attachEvent("on"+e,function(t){var t=t||event;t.preventDefault=t.preventDefault||function(){this.returnValue=false};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=true};return i(t)})}}}(),S=function(){if([].indexOf){return function(t,e){return t.indexOf(e)}}else{return function(t,e){for(var i=0,s=t.length;i<s;i++){if(e===t[i]){return i}}return-1}}}(),X=function(t){var e=0,i=0;if(t.offsetParent){do{e+=t.offsetLeft;i+=t.offsetTop}while(t=t.offsetParent)}return{x:e,y:i}},Y=function(t,e,s){var n=t[_],r;if(!n){n=t[_]=++C}r=T[n];if(!r){r=T[n]={}}if(e&&s!==i){r[e]=s}return e?r[e]:r},D=function(t,e){if(!t){return}var i=t[_];if(i&&T[i]){if(e){delete T[i][e]}else{delete T[i]}}},A=function(t,e,i){var s=Y(t),n;z(e.split(" "),function(t){n=s[t]=s[t]||[];n.push(i)})},I=function(t,e,i,s){var n,r=0,o=true;i.ctx.save();i.ctx.scale(i.__zoom,i.__zoom);for(;n=e[r++];){if(n.call(t,i,s)===false){o=false}}i.ctx.restore();if(!o){s.preventDefault()}return o},L=function(t,e,i,s){var n=Y(t,e),r=Y(s.cv,e);if(n&&n.length){d.push(t,n)}if(r&&r.length){d.push(t,r)}},H=function(t,e){var i,s;t.clear();for(i=0,s=d.length;i<s;i+=2){I(d[i],d[i+1],t,e)}d=[];t.draw()},O=function(e,i){e.preventDefault();e=e.touches?e.touches[0]:e;var s,n=i._shapes,r=n.length;i.x=((e&&e.pageX-i._pos.x+1||t.event.offsetX+1)-1)/i.__zoom;i.y=((e&&e.pageY-i._pos.y+1||t.event.offsetY+1)-1)/i.__zoom;while(s=n[--r]){if(s.hitTest(i)){return s}}},q=function(e,i){return function(s){s.preventDefault();s=s.touches?s.touches[0]:s;e.lastX=e.x;e.lastY=e.y;i=e._curHover;f=true;e.x=((s&&s.pageX-e._pos.x+1||t.event.offsetX+1)-1)/e.__zoom;e.y=((s&&s.pageY-e._pos.y+1||t.event.offsetY+1)-1)/e.__zoom;if(!e._clicked&&a){var n=O(s,e);if(n){if(i!==n){L(n,"mouseover",s,e);if(i){L(i,"mouseout",s,e)}}e._curHover=i=n}else if(i){L(i,"mouseout",s,e);e._curHover=i=null}}if(i){L(i,"mousemove",s,e)}if(d.length){H(e,s)}}},F=function(t){return function(e){if(!a){t._curHover=O(e,t)}var i=t._curHover,s=p[e.which||e.button];t._clicked=true;y=t.cv;t[s]=true;if(i){L(i,"mousedown",e,t);if(i!==t.focused){L(i,"focus",e,t);if(t.focused){L(t.focused,"blur",e,t)}}}else if(t.focused){L(t.focused,"blur",e,t);t.focused=null}t.focused=i||null;if(d.length){H(t,e)}t[s]=false}},R=function(t){return function(e){t._clicked=false;if(t._curHover){L(t._curHover,"mouseup",e,t);if(!f&&l){L(t._curHover,"click",e,t);if(t.lastClick&&e.timeStamp-t.lastClick<300){L(t._curHover,"dblclick",e,t)}t.lastClick=e.timeStamp}}f=false;if(d.length){H(t,e)}}},B=function(t){return function(e){if(t._curHover){L(t._curHover,"click",e,t)}if(d.length){H(t,e)}}},M=function(t){return function(e){if(t._curHover){L(t._curHover,"dblclick",e,t)}if(d.length){H(t,e)}}},N=function(){var t={specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",110:".",111:"/",187:"+",189:"-"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}},e;return function(i,s){var n=Y(s.cv,i,{}),r=Y(n);return function(n){if(y!==s.cv&&!s.__globalkeyevents){return}e=i=="keydown"?n.keyCode:e;var o=t.specialKeys[e],h=o||String.fromCharCode(e||n.charCode).toLowerCase(),a="",u;if(n.altKey){a+="alt+"}if(n.ctrlKey||n.metaKey){a+="ctrl+"}if(n.shiftKey){a+="shift+"}u=r[a+h]||r[a+t.shiftNums[h]]||a==="shift+"&&r[t.shiftNums[h]]||r.any;if(u){var f=I(s,u,s,n);if(!s.play){s.redraw()}return f}}}}(),G=function(i,s){i=b(i,r)?e.getElementById(i):i;if(i.getContext||t.G_vmlCanvasManager){return new G.fn.init(i,s)}else{throw Error("Your browser sucks")}};G.forse_redraw=function(){var t,e=u.length;for(t=0;t<e;t++){u[t].redraw()}};G.fn=G.prototype={init:function(i,s){this.cv=i;if(!i.getContext&&t.G_vmlCanvasManager){G_vmlCanvasManager.initElement(i)}this.ctx=i.getContext("2d");this.width=i.width;this.height=i.height;this.__zoom=1;this.x=0;this.y=0;if(!this.cv[_]){u.push(this);this._shapes=Y(i,"shapes",[]);this.dirtycanvas=Y(i,"cache",document.createElement("canvas"));this._last=null;if(t.G_vmlCanvasManager){G_vmlCanvasManager.initElement(this.dirtycanvas)}this.dirtyctx=this.dirtycanvas&&this.dirtycanvas.getContext("2d");this.calcCanvasPosition();if(l){E(i,"touchmove",q(this),false);E(i,"touchend",R(this),false);E(i,"touchstart",F(this),false)}else{E(i,"mousemove",q(this),false);E(i,"dblclick",M(this),false);E(i,"click",B(this),false);E(i,"mouseup",R(this),false);E(i,"mousedown",F(this),false);E(e,"keydown",N("keydown",this),false);E(e,"keyup",N("keyup",this),false);if(!v){E(e,"keypress",N("keypress",this),false)}if("onselectstart"in i){i.onselectstart=function(){return false};i.onmousedown=function(){return false}}}}else{this._shapes=Y(i,"shapes");this._last=s}},updateCache:function(){if(!this.dirtycanvas){return}var t=this.dirtycanvas.width=w.w;var e=this.dirtycanvas.height=w.h;P(this._shapes,w);this.ctx.clearRect(0,0,this.cv.width,this.cv.height);this.draw();this._shapes.push(w);var i=w.position();this.dirtyctx.drawImage(this.cv,i.x,i.y,t,e,0,0,t,e);this.ctx.clearRect(0,0,this.cv.width,this.cv.height)},calcCanvasPosition:function(){this._pos=X(this.cv);return this},get:function(t){t=t<0?this._shapes.length+t:t;return this._shapes[t]||this._shapes.slice(0)},getAll:function(t){var e=[],i=g.exec(t),s,n;if(t==="*"){e=this._shapes.slice(0)}else if(i){s=i[1];n=i[2];z(this._shapes,function(t){if(t[s]===n){e.push(t)}})}return e},remove:function(t){D(P(this._shapes,t));return this.redraw()},addId:function(t){var e=g.exec(t),i=this._last;if(e&&!e[1]&&i){if(!b(i,o)){i["#"]=t}else{z(i,function(e){e["#"]=t})}}return this},removeId:function(){var t=this._last;if(t&&!b(t,o)){t["#"]=""}else{z(t,function(t){t["#"]=""})}return this},find:function(t){var e=this.getAll(t);return G(this.cv,e.length==1?e[0]:e)},attr:function(t,e){var i=this._last;if(!b(i,o)){i.attr(t,e)}else{z(i,function(i){i.attr(t,e)})}return this},rotate:function(t){return this.attr({rotation:t})},translate:function(t,e){return this.attr({tx:t,ty:e})},scale:function(t,e){return this.attr({scaleX:t,scaleY:e})},skewX:function(t){return this.attr({skewX:t})},skewY:function(t){return this.attr({skewY:t})},zoomTo:function(t){if(b(t,"number")){this.__zoom=t}return this},zoomIn:function(){return this.zoomTo(this.__zoom+.1)},zoomOut:function(){return this.zoomTo(this.__zoom-.1)},setGlobalKeyEvents:function(t){this.__globalkeyevents=!!t;return this},bind:function(t,e,i){var s=i||this._last,n;if(!a&&"mouseover mouseout".indexOf(t)!=-1){a=true}if(b(t,r)&&b(e,h)){for(n in e){this[n](t,e[n])}}else if(b(t,h)){for(n in t){this[n](t[n])}}else if(s&&!b(s,o)){A(s,t,e)}else{z(s,function(i){A(i,t,e)})}return this},beforeDraw:function(t){if(b(t,n)){this.__beforeDraw=t}return this},afterDraw:function(t){if(b(t,n)){this.__afterDraw=t}return this},clear:function(t,e,i,s){if(!m&&this.dirtycanvas&&!this.play&&w)return;t=t||0;e=e||0;i=i||this.cv.width;s=s||this.cv.height;this.ctx.clearRect(t,e,i,s);return this},draw:function(t){var e,i=0,s=this._shapes;this.ctx.save();G.__zoom=this.__zoom;this.__beforeDraw&&this.__beforeDraw.call(this,this);if(!m&&this.dirtycanvas&&x&&!this.play&&w){w.draw(this.ctx)}else{for(;e=s[i++];){e.draw(this.ctx)}}this.__afterDraw&&this.__afterDraw.call(this,this);G.__zoom=1;this.ctx.restore();return this},redraw:function(){return this.clear().draw()},loop:function(t){var e=this,i=Y(this.cv),s;if(b(t,n)){i.loop=t}t=i.loop;s=this.play=++C;(function r(){if(s!==e.play){return}k(r);e.redraw();if(t){e.ctx.save();t.call(e,e);e.ctx.restore()}e.frameCount+=1})();return this},frameCount:0,stop:function(){delete this.play;return this}};G.fn.init.prototype=G.prototype;G.addEventListener=E;function K(t,e){var i=g.exec(t);return function(s,n){if(i&&this[i[1]]===i[2]||t==="*"){e.call(this,s,n)}}}z(("mousemove mouseover mouseout mousedown "+"mouseup click dblclick focus blur").split(" "),function(t){G.fn[t]=function(e,i){var s;if(b(i,n)){e=K(e,i);s=this.cv}return this.bind(t,e,s)}});z("keydown keypress keyup".split(" "),function(t){G.fn[t]=function(e,i){if(!i&&b(e,n)){i=e;e="any"}e=(e+"").toLowerCase();return this.bind(e,i,Y(this.cv,t))}});if(v){G.fn.keypress=G.fn.keydown}G.fn.drag=function(t){var e,i,s,n,h=[],a,u="Cevent-drag"+_,f=this._last;if(b(t,r)){a=t;t=arguments[1]}if(t){e=t.start;i=t.move;s=t.end}if(a){return this.mousedown(a,v).mouseup(a,p).mousemove(a,g)}if(f&&!b(f,o)){f=[f]}z(f,function(t){if(!Y(t,u)){Y(t,u,true);h.push(t)}});var c=G(this.cv,h).mousedown(v).mouseup(p).mousemove(g);function v(t,e){if(t.LEFT||l){G.inDrag=!!(w=this);if(!t.play&&!m){t.updateCache()}}}function g(t,s){if(this===w){if(!x){if(e&&e.call(this,t,s)===false){return w=x=null}else{x=true}}if(i){i.call(this,t,s)}var n=this.getBoundingBox();this.rmove(t.x-t.lastX,t.y-t.lastY);var r=this.getBoundingBox();r.x=r.x<0?0:r.x;r.y=r.y<0?0:r.y;r.w-=r.w+r.x<t.cv.width?0:r.w+r.x-t.cv.width;r.h-=r.h+r.y<t.cv.height?0:r.h+r.y-t.cv.height;var o=t.dirtycanvas;t.ctx.clearRect(n.x,n.y,n.w,n.h);t.ctx.drawImage(o,0,0,o.width,o.height,n.x<0?0:n.x,n.y<0?0:n.y,o.width,o.height);o.width=r.w;o.height=r.h;t.dirtyctx.drawImage(t.cv,r.x,r.y,r.w,r.h,0,0,r.w,r.h)}}function p(t,e){if(this===w){w=x=null;if(s){s.call(this,t,e)}t.clear()}}return this};G.registre=G.register=function(t,e){t=t.toLowerCase();var i=t.charAt(0).toUpperCase()+t.substring(1);this[i]=e;this.prototype[t]=function(){var i=e.apply(this,arguments);i[""]=t;this._shapes.push(i);this._last=i;return this}};E(e,"mousedown",function(t){var e=t.target||t.srcElement;e=e.nodeName=="OBJECT"?e.parentNode:e;if(!e[_]){y=e}},false);G.isTouchDevice=l;t.Cevent=G})(this,document);(function(t,e){"use strict";var i=Math,s=i.PI,n=2*s,r=s/180,o=i.sqrt,h=i.pow,a=i.cos,u=i.sin,f=i.round,c=i.abs,l=i.acos,m=i.atan2,v,g=Object.prototype.hasOwnProperty,p=Array.prototype.slice,d={tx:0,ty:0,scaleX:1,scaleY:1,skewX:0,skewY:0,fill:"#000",stroke:"",lineWidth:1,lineJoin:"miter",lineCap:"butt",alpha:1,rotation:0,composite:"source-over",shadowColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,fontStyle:"normal",fontWeight:"normal",fontSize:10,fontFamily:"Arial"},y=document.createElement("canvas"),w=y.getContext&&y.getContext("2d"),x=function(t,e){return o(h(t.x-e.x,2)+h(t.y-e.y,2))},_=function(t,e,i,s,n){var r=i-t,o=s-e,h={},a;if(r===0&&o===0){return}a=((n.x-t)*r+(n.y-e)*o)/(r*r+o*o);if(a<0){h={x:t,y:e}}else if(a>1){h={x:i,y:i}}else{h={x:t+a*r,y:e+a*o}}return x(h,n)},C=function(t,e,i){i=r*i;return{x:t*a(i)-e*u(i),y:t*u(i)+e*a(i)}},T=function(t,e){var i;for(i in e){if(g.call(e,i)){t[i]=e[i]}}},k=Class.extend({init:function(t,e){this.x=t||0;this.y=e||0;T(this,d)},position:function(){var t=C(this.x*this.scaleX,this.y*this.scaleY,this.rotation);return{x:t.x+this.tx,y:t.y+this.ty}},rmove:function(t,e){this.tx+=t;this.ty+=e},attr:function(t,e){var i;if(typeof t=="string"){this[t]=e}else{for(i in t){this[i]=t[i]}}return this},applyStyle:function(t){var e=this.shadowBlur,i=this.shadowOffsetX,s=this.shadowOffsetY;t.fillStyle=this.fill;t.globalAlpha=this.alpha;t.globalCompositeOperation=this.composite;if(this.stroke){t.strokeStyle=this.stroke;t.lineWidth=this.lineWidth}if(i||s||e){t.shadowColor=this.shadowColor;t.shadowOffsetX=i;t.shadowOffsetY=s;t.shadowBlur=e}},setTransform:function(e){var i=t.__zoom,s=this.scaleX*i,n=this.scaleY*i,o=this.skewX*i,h=this.skewY*i,f=this.rotation*r,c=u(f),l=a(f),m=this.tx*i,v=this.ty*i,g=l*s-c*h,p=l*o-c*n,d=c*s+l*h,y=c*o+l*n;e.setTransform(g,d,p,y,m,v)},draw:function(t){throw new Error("El método draw no se ha implementado")},fill_or_stroke:function(t){if(this.fill){t.fill()}if(this.stroke){t.stroke()}},hitTest:function(t){if(w&&w.isPointInPath){this.draw(w);w.setTransform(1,0,0,1,0,0);return w.isPointInPath(t.x,t.y)}else{throw Error("Método isPointInPath no soportado: Necesita FlashCanvasPro")}}}),b=k.extend({init:function(t,e,i,s,n){this.r=n||0;this.w=i||5;this.h=s||i;this._super(t,e)},draw:function(e){var i=this.x,s=this.y,n=this.w,r=this.h;this.applyStyle(e);this.setTransform(e);e.beginPath();if(this.r){t.setContext(e).polygon(i,s,i+n,s,i+n,s+r,i,s+r,this.r)}else{e.rect(i,s,f(n),f(r))}e.closePath();if(this.fill){e.fill()}if(this.stroke){e.stroke()}},hitTest:function(t){if(this.skewX||this.skewY||this.r){return this._super(t)}var e=this.position(),i=C(t.x-e.x,t.y-e.y,-this.rotation);return i.x>=0&&i.x<=this.w*this.scaleX&&i.y>=0&&i.y<=this.h*this.scaleY}}),z=b.extend({init:function(t,e,i){this.setText(i);this._super(t,e,this.w,this.h)},applyStyle:function(t){t.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.h=this.fontSize;this.w=t.measureText(this.text).width;this._super(t)},setText:function(t){this.text=t+""},draw:function(t){this.applyStyle(t);this.setTransform(t);if(this.fill){t.fillText(this.text,this.x,this.y+this.h)}if(this.stroke){t.strokeText(this.text,this.x,this.y+this.h)}},hitTest:function(t){if(this.skewX||this.skewY&&w&&w.isPointInPath){this.setTransform(w);w.beginPath();w.rect(this.x,this.y,this.w,this.h);w.closePath();return w.isPointInPath(t.x,t.y)}return this._super(t)}}),P={},E=b.extend({init:function(t,e,i){this.setImg(i);this._super(t,e,this.img.width,this.img.height)},setImg:function(e){if(P[e]){this.img=P[e];this.src=this.img.src;return}if(e.nodeName=="IMG"){this.img=e}else{e+="";this.img=P[e]=new Image;this.img.src=e}this.img.onload=function(){t.forse_redraw()};this.src=this.img.src},draw:function(t){var e=this.x,i=this.y;this.w=this.img.width;this.h=this.img.height;this.applyStyle(t);this.setTransform(t);if(t===w){t.beginPath();t.rect(e,i,f(this.w),f(this.h));t.closePath()}else{t.drawImage(this.img,e,i)}}}),S=b.extend({draw:function(t){var e=this.x,i=this.y,s=this.w,n=this.h,r=.5522847498307933,o=r*s,h=r*n;this.applyStyle(t);this.setTransform(t);t.beginPath();t.moveTo(e+s,i);t.bezierCurveTo(e+s,i-h,e+o,i-n,e,i-n);t.bezierCurveTo(e-o,i-n,e-s,i-h,e-s,i);t.bezierCurveTo(e-s,i+h,e-o,i+n,e,i+n);t.bezierCurveTo(e+o,i+n,e+s,i+h,e+s,i);t.closePath();if(this.fill){t.fill()}if(this.stroke){t.stroke()}},hitTest:k.prototype.hitTest}),X=k.extend({init:function(t,e,i,s,n,r){this.clockwise=r;this.endAngle=n;this.startAngle=s;this.r=i;this._super(t,e)},draw:function(t){var e=this.x,i=this.y;this.applyStyle(t);this.setTransform(t);t.beginPath();t.arc(e,i,f(this.r),this.startAngle||s*2,this.endAngle||0,!!this.clockwise);t.lineTo(e,i);t.closePath();if(this.fill){t.fill()}if(this.stroke){t.stroke()}}}),Y=k.extend({init:function(t,e,i){this.r=i||5;this._super(t,e)},draw:function(t){var e=this.x,i=this.y;this.applyStyle(t);this.setTransform(t);t.beginPath();t.arc(e,i,f(this.r),0,s*2,true);t.closePath();if(this.fill){t.fill()}if(this.stroke){t.stroke()}},hitTest:function(t){if(this.skewX||this.skewY||this.scaleX!==this.scaleY){return this._super(t)}var e=!!this.stroke&&this.lineWidth,i=this.position();return x(t,i)<=(this.r+e)*this.scaleX}}),D=k.extend({init:function(t,e,i,s){this.x2=i;this.y2=s;this._super(t,e);this.stroke="#000"},rmove:function(t,e){this.x+=t;this.y+=e;this.x2+=t;this.y2+=e},applyStyle:function(t){t.lineJoin=this.lineJoin;t.lineCap=this.lineCap;this._super(t)},draw:function(t){this.applyStyle(t);this.setTransform(t);t.beginPath();t.moveTo(this.x,this.y);t.lineTo(this.x2,this.y2);t.stroke()},hitTest:function(t){return _(this.x,this.y,this.x2,this.y2,t)<=this.lineWidth+2}}),A,I,L,H,O=null,q=null,F=false,R=/[MmLlZzHhVvCcQqSsTtAa]\s*([\-+]?(?:\d+[.]?\d*|[.]\d+)(?:[Ee][\-+]?\d+)?[,\s]*)*/g,B=/[\-+]?(?:\d+[.]?\d*|[.]\d+)(?:[Ee][\-+]?\d+)?/g,M=function(t,e,i,s){var n=t*i+e*s,r=o(t*t+e*e),h=o(i*i+s*s),a=n/(r*h),u,f;if(a>1){a=1}else if(a<-1){a=-1}u=c(l(a));f=t*s-e*i;return f===c(f)?u:-u},N=function(t,e,i){return[t*a(i)-e*u(i),e*a(i)+t*u(i)]},G=function(t,e,i){if(F){t.ctx.moveTo(e,i)}},K=function(t,e){A=t;I=e;O=null;q=null;F=false},W=function(){if(A===v){throw new Error("No current point; can't use relative coordinates")}},J=function(t,e,i,s){if(e!==(i?t.length%i:t.length)||t.length<s){throw new Error("wrong number of arguments")}},j=function(t,e){this.ctx.moveTo(t,e);K(t,e);L=t;H=e;if(arguments.length>2){Q.apply(this,p.call(arguments,2))}return this},V=function(t,e){if(F){A=I=0}W();t+=A;e+=I;this.ctx.moveTo(t,e);K(t,e);L=t;H=e;if(arguments.length>2){Z.apply(this,p.call(arguments,2))}return this},Q=function(t,e){var i,s=arguments.length;J(arguments,0,2,2);G(this,t,e);this.ctx.lineTo(t,e);for(i=2;i<s;i+=2){this.ctx.lineTo(t=arguments[i],e=arguments[i+1])}K(t,e);return this},Z=function(t,e){var i,s=A,n=I,r=arguments.length;J(arguments,0,2,2);W();for(i=0;i<r;i+=2){this.ctx.lineTo(s+=arguments[i],n+=arguments[i+1])}K(s,n);return this},$=function(){this.ctx.closePath();K(this,L,H);return this},U=function(t){var e,i=arguments.length;W();for(e=0;e<i;e++){Q.call(this,arguments[e],I)}return this},te=function(t){var e,i=arguments.length;for(e=0;e<i;e++){Z.call(this,arguments[e],0)}return this},ee=function(t){var e,i=arguments.length;W();for(e=0;e<i;e++){Q.call(this,A,arguments[e])}return this},ie=function(t){var e,i=arguments.length;for(e=0;e<i;e++){Z.call(this,0,arguments[e])}return this},se=function(t,e,i,s,n,r){var o,h=arguments,a=arguments.length;J(h,0,6,6);G(this,t,i);this.ctx.bezierCurveTo(t,e,i,s,n,r);for(o=6;o<a;o+=6){this.ctx.bezierCurveTo(h[o],h[o+1],i=h[o+2],s=h[o+3],n=h[o+4],r=h[o+5])}K(n,r);O=[i,s];return this},ne=function(t,e,i,s,n,r){var o,h=arguments,a=h.length,u=A,f=I;J(h,0,6,6);W();for(o=0;o<a;o+=6){this.ctx.bezierCurveTo(u+h[o],f+h[o+1],i=u+h[o+2],s=f+h[o+3],u+=h[o+4],f+=h[o+5])}K(u,f);O=[i,s];return this},re=function(t,e,i,s){var n,r=arguments,o=r.length;J(arguments,0,4,4);G(this,t,e);this.ctx.quadraticCurveTo(t,e,i,s);for(n=4;n<o;n+=4){this.ctx.quadraticCurveTo(t=r[n],e=r[n+1],i=r[n+2],s=r[n+3])}K(i,s);q=[t,e];return this},oe=function(t,e,i,s){var n,r=arguments,o=r.length,h=A,a=I;J(arguments,0,4,4);W();for(n=0;n<o;n+=4){this.ctx.quadraticCurveTo(t=h+r[n],e=a+r[n+1],h+=r[n+2],a+=r[n+3])}K(h,a);q=[t,e];return this},he=function(){if(!O){throw new Error("Last command was not a cubic bezier")}var t,e=arguments,i=e.length,s=A,n=I,r=O[0],o=O[1],h,a,u,f,c,l;J(arguments,0,4,4);W();for(t=0;t<i;t+=4){h=s+(s-r);u=n+(n-o);a=e[t];f=e[t+1];c=e[t+2];l=e[t+3];this.ctx.bezierCurveTo(h,u,a,f,c,l);s=c;n=l;r=a;o=f}K(s,n);O=[r,o];return this},ae=function(){if(!O){throw new Error("Last command was not a cubic bezier")}var t,e=arguments,i=e.length,s=A,n=I,r=O[0],o=O[1],h,a,u,f,c,l;J(arguments,0,4,4);W();for(t=0;t<i;t+=4){h=s+(s-r);u=n+(n-o);a=s+e[t];f=n+e[t+1];c=s+e[t+2];l=n+e[t+3];this.ctx.bezierCurveTo(h,u,a,f,c,l);s=c;n=l;r=a;o=f}K(s,n);O=[r,o];return this},ue=function(){if(!q){throw new Error("Last command was not a cubic bezier")}var t,e=arguments,i=arguments.length,s=A,n=I,r=q[0],o=q[1],h,a,u,f;J(arguments,0,2,2);W();for(t=0;t<i;t+=2){h=s+(s-r);a=n+(n-o);u=arguments[t];f=arguments[t+1];this.ctx.quadraticCurveTo(h,a,u,f);s=u;n=f;r=h;o=a}K(s,n);q=[r,o];return this},fe=function(){if(!q){throw new Error("Last command was not a cubic bezier")}var t,e=arguments,i=e.length,s=A,n=I,r=q[0],o=q[1],h,a,u,f;J(arguments,0,2,2);W();for(t=0;t<i;t+=2){h=s+(s-r);a=n+(n-o);u=s+arguments[t];f=n+arguments[t+1];this.ctx.quadraticCurveTo(h,a,u,f);s=u;n=f;r=h;o=a}K(s,n);q=[r,o];return this},ce=function(t,e,i,s,h,f,l){if(!t||!e){return Q.call(this,f,l)}s=!!s;h=!!h;W();var m=A,v=I,g=f,p=l,d=i*r,y=u(d),w=a(d),x=(m-g)/2,_=(v-p)/2,C=w*x+y*_,T=-y*x+w*_,k,b,z,P,E,S,X,Y;t=c(t);e=c(e);k=C*C/(t*t)+T*T/(e*e);if(k>1){t*=o(k);e*=o(k);b=z=0}else{var D=t*t,L=e*e,H=C*C,O=T*T,q=D*O+L*H;q=o(D*L/q-1);if(s===h){q=-q}b=q*t*T/e;z=-q*e*C/t}P=w*(b-y)*(z+(m+g)/2);E=y*(b+w)*(z+(v+p)/2);x=(C-b)/t;_=(T-z)/e;S=M(1,0,x,_);Y=M(x,_,(-C-b)/t,(-T-z)/e);if(h&&Y<0){Y+=n}else if(!h&&Y>0){Y-=n}X=S+Y;this.ellipse(P,E,t,e,d,S,X,!h);return this},le=function(t,e,i,s,n,r,o){W();ce.call(this,t,e,i,s,n,r+A,o+I);return this},me=function(t,e,i,s,r,o,h,f){r=r||0;o=o||0;h=h===v?n:h;var c=N(i*a(o),s*u(o),r),l=t+c[0],m=e+c[1],g=N(i*a(h),s*u(h),r),p=t+g[0],d=e+g[1];G(this,l,m);this.ctx.translate(t,e);this.ctx.rotate(r);this.ctx.scale(i/s,1);this.ctx.arc(0,0,s,o,h,!!f);this.ctx.scale(s/i,1);this.ctx.rotate(-r);this.ctx.translate(-t,-e);K(p,d);return this},ve=function(){var t,e=arguments,i=e.length;if(i<6){throw new Error("not enough arguments")}if(i%2===0){this.ctx.moveTo(e[0],e[1]);for(t=2;t<i;t+=2){this.ctx.lineTo(e[t],e[t+1])}}else{var s=e[i-1],n=(i-1)/2,r=(e[n*2-2]+e[0])/2,o=(e[n*2-1]+e[1])/2,h,a;this.ctx.moveTo(r,o);for(t=0;t<n-1;t++){this.ctx.arcTo(h=e[t*2],a=e[t*2+1],e[t*2+2],e[t*2+3],s,r,o);r=h;o=a}this.ctx.arcTo(e[n*2-2],e[n*2-1],e[0],e[1],s,r,o)}return this},ge=function(t){var e=t.match(R),i,s,n,r,o,h=[];if(!e){throw new Error("Bad path: "+t)}for(r=0;i=e[r];r++){n=[];n.cmd=i.charAt(0);s=i.match(B)||[];for(o=0;o<s.length;o++){n[o]=+s[o]}h.push(n)}return h},pe=k.extend({init:function(t){this.svgpath=ge(t);this._super(0,0);if(this.svgpath[0].cmd.toLowerCase()=="m"){this.x=this.svgpath[0][0];this.y=this.svgpath[0][1]}},draw:function(e){var i=this.svgpath,s,n;this.applyStyle(e);this.setTransform(e);e.beginPath();t.setContext(e);for(s=0,n=i.length;s<n;s++){t[i[s].cmd].apply(t,i[s])}if(this.fill){e.fill()}if(this.stroke){e.stroke()}}});T(t,{distance:x,__zoom:1,Shape:k,setContext:function(t){this.ctx=t;K(0,0);t.beginPath();return this},polygon:ve,ellipse:me,M:j,m:V,L:Q,l:Z,H:U,h:te,V:ee,v:ie,C:se,c:ne,S:he,s:ae,Q:re,q:oe,T:ue,t:fe,A:ce,a:le,Z:$,z:$});(function(){if(!w){return}var t=b(40,40,40,40,5);t.draw(w);if(!w.getImageData(79,60,1,1).data[3]){var e=CanvasRenderingContext2D.prototype.arcTo;var i=function(t,e,i,s){return(t-i)*(t-i)+(e-s)*(e-s)};CanvasRenderingContext2D.prototype.arcTo=function(t,s,n,r,h,a,u){if(isNaN(a+u)){return e.apply(this,arguments)}var f,c,l,v,g,p,d,y,w,x,_,C,T,k,b,z,P,E,S,X;if(t==a&&s==u||t==n&&s==r||h==0){this.lineTo(t,s);return}f=(n-t)*(u-s)+(r-s)*(t-a);if(f==0){this.lineTo(t,s);return}c=i(a,u,t,s);l=i(t,s,n,r);v=i(a,u,n,r);g=(c+l-v)/(2*o(c*l));c=o(c);l=o(l);p=o(1-g*g);d=h*p/(1-g);y=(t-a)/c;w=(s-u)/c;x=(t-n)/l;_=(s-r)/l;C=t-y*d;T=s-w*d;k=t-x*d;b=s-_*d;z=f<0;P=C+w*h*(z?1:-1);E=T-y*h*(z?1:-1);S=m(T-E,C-P);X=m(b-E,k-P);this.lineTo(C,T);this.arc(P,E,h,S,X,z)}}})();if(e.FlashCanvas){document.body.appendChild(y);FlashCanvas.initElement(y);w=y.getContext("2d");y.style.display="none"}if(w){w.fill=w.stroke=function(){}}t.register("image",E);t.register("circle",Y);t.register("arc",X);t.register("ellipse",S);t.register("rect",b);t.register("text",z);t.register("line",D);t.register("path",pe)})(Cevent,this);